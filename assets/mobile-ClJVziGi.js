import{s as B,g as o}from"./supabase-S-kuNvKe.js";const p=B.channel("room1",{config:{broadcast:{ack:!0}}});p.on("broadcast",{event:"msg"},({payload:e})=>{console.log("received:",e)});p.subscribe(e=>{console.log("channel status:",e),w(),y("connected","x",0)});function y(e,t,a){p.send({type:"broadcast",event:"command",payload:{object:e,direction:t,amount:a}})}const u=.1;function w(){for(let e=1;e<=4;e++){const t=`chair-${e}`,a=document.querySelector(`.chair-${e} span`);if(!t)continue;let n=0;const s=document.getElementById(`chair-slider-${e}`);s.addEventListener("input",i=>{n=parseFloat(i.target.value),a.textContent=Math.trunc(n*100),y(t,"x",n*.7)}),document.getElementById(`minus-${e}`).addEventListener("click",()=>{let i=n-u;s.value=i,s.dispatchEvent(new Event("input"))}),document.getElementById(`plus-${e}`).addEventListener("click",()=>{let i=n+u;s.value=i,s.dispatchEvent(new Event("input"))})}}let q=0,m=1,l=1;const L=document.querySelectorAll(".seat-btn");L.forEach(e=>{e.addEventListener("click",()=>{e.dataset.side!==void 0&&(q=Number(e.dataset.side),b(),L.forEach(t=>{t.classList.remove("side-active")}),e.classList.add("side-active")),e.dataset.forth!==void 0&&(m=Number(e.dataset.forth),b())})});function b(){l=q+m,console.log("activeseat: ",l),document.querySelectorAll(".controls-chairs").forEach(s=>{s.classList.add("visually-hidden")}),document.querySelector(`.chair-${l}`).classList.remove("visually-hidden");const a=document.querySelector(".seat-back img"),n=document.querySelector(".seat-front img");m===1?(n.src="./public/img/seat-front-on.png",a.src="./public/img/seat-back-off.png"):(n.src="./public/img/seat-front-off.png",a.src="./public/img/seat-back-on.png")}const r=document.getElementById("dashboard-slider");let c=0;r.addEventListener("input",e=>{const t=document.querySelector(".dashboard-group span");c=parseFloat(e.target.value),t.textContent=Math.trunc(c*100),y("dashboard","y",c*1)});const I=document.getElementById("minus-5");I.addEventListener("click",()=>{let e=c-u;r.value=e,r.dispatchEvent(new Event("input"))});const M=document.getElementById("plus-5");M.addEventListener("click",()=>{let e=c+u;r.value=e,r.dispatchEvent(new Event("input"))});w();const h=document.querySelector(".nav-seats"),v=document.querySelector(".nav-dashboard"),C=document.querySelectorAll(".dashboard-group"),k=document.querySelectorAll(".seat-group"),F=document.querySelector(".seat-sides-container"),$=document.querySelector(".seat-forth-container");h.addEventListener("click",()=>{C.forEach(e=>{o.to(e,{opacity:0,duration:.2,onComplete:()=>e.classList.add("visually-hidden")})}),k.forEach(e=>{o.to(e,{opacity:1,duration:.25,onComplete:()=>{e.classList.contains(`chair-${l}`)&&e.classList.remove("visually-hidden")}})}),[F,$].forEach(e=>{o.to(e,{opacity:1,duration:.25,onComplete:()=>e.classList.remove("visually-hidden")})}),h.classList.add("button-active"),v.classList.remove("button-active")});v.addEventListener("click",()=>{k.forEach(e=>{o.to(e,{opacity:0,duration:.2,onComplete:()=>e.classList.add("visually-hidden")})}),[F,$].forEach(e=>{o.to(e,{opacity:0,duration:.2,onComplete:()=>e.classList.add("visually-hidden")})}),C.forEach(e=>{o.to(e,{opacity:1,duration:.25,onComplete:()=>e.classList.remove("visually-hidden")})}),h.classList.remove("button-active"),v.classList.add("button-active")});const f=document.querySelector(".mobile-start"),S=document.getElementById("rotate-warning");function x(){return screen.orientation&&screen.orientation.type?screen.orientation.type.startsWith("portrait"):window.orientation!==void 0?Math.abs(window.orientation)!==90:window.innerHeight>window.innerWidth}function E(){x()?S.style.display="flex":S.style.display="none"}function d(){document.querySelector(".controls-container").classList.remove("visually-hidden"),f.classList.add("visually-hidden")}function A(){document.querySelector(".controls-container").classList.add("visually-hidden"),f.classList.remove("visually-hidden")}window.addEventListener("orientationchange",E);window.addEventListener("resize",E);E();function g(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement?d():A()}f.addEventListener("click",async()=>{const e=document.documentElement;try{e.requestFullscreen?(await e.requestFullscreen(),d()):e.webkitRequestFullscreen?(await e.webkitRequestFullscreen(),d()):e.msRequestFullscreen?(await e.msRequestFullscreen(),d()):alert("Fullscreen API not supported.")}catch(t){alert("Fullscreen request failed:",t)}});document.addEventListener("fullscreenchange",g);document.addEventListener("webkitfullscreenchange",g);document.addEventListener("msfullscreenchange",g);
