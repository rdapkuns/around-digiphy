import{s as I,g as i}from"./supabase-8IYf_8Oa.js";const f=I.channel("room1",{config:{broadcast:{ack:!0}}});f.on("broadcast",{event:"msg"},({payload:e})=>{console.log("received:",e)});f.subscribe(e=>{console.log("channel status:",e),w(),m("connected","x",0)});function m(e,t,a){f.send({type:"broadcast",event:"command",payload:{object:e,direction:t,amount:a}})}const u=.1;function w(){for(let e=1;e<=4;e++){const t=`chair-${e}`,a=document.querySelector(`.chair-${e} span`);if(!t)continue;let s=0;const n=document.getElementById(`chair-slider-${e}`);n.addEventListener("input",r=>{s=parseFloat(r.target.value),a.textContent=Math.trunc(s*100),m(t,"x",s*.7)}),document.getElementById(`minus-${e}`).addEventListener("click",()=>{let r=s-u;n.value=r,n.dispatchEvent(new Event("input"))}),document.getElementById(`plus-${e}`).addEventListener("click",()=>{let r=s+u;n.value=r,n.dispatchEvent(new Event("input"))})}}let q=0,h=1,o=1;const C=document.querySelectorAll(".chair-slider"),S=document.querySelectorAll(".seat-btn");S.forEach(e=>{e.addEventListener("click",()=>{e.dataset.side!==void 0&&(q=Number(e.dataset.side),L(),S.forEach(t=>{t.classList.remove("side-active")}),e.classList.add("side-active")),e.dataset.forth!==void 0&&(h=Number(e.dataset.forth),L())})});function L(){o=q+h,console.log("activeseat: ",o),document.querySelectorAll(".controls-chairs").forEach(n=>{n.classList.add("visually-hidden")}),document.querySelector(`.chair-${o}`).classList.remove("visually-hidden");const a=document.querySelector(".seat-back img"),s=document.querySelector(".seat-front img");h===1?(s.src="./public/img/seat-front-on.png",a.src="./public/img/seat-back-off.png"):(s.src="./public/img/seat-front-off.png",a.src="./public/img/seat-back-on.png"),C.forEach(n=>{n.id===`chair-slider-${o}`&&n.dispatchEvent(new Event("input"))})}const c=document.getElementById("dashboard-slider");let l=0;c.addEventListener("input",e=>{const t=document.querySelector(".dashboard-group span");l=parseFloat(e.target.value),t.textContent=Math.trunc(l*100),m("dashboard","y",l*1)});const M=document.getElementById("minus-5");M.addEventListener("click",()=>{let e=l-u;c.value=e,c.dispatchEvent(new Event("input"))});const x=document.getElementById("plus-5");x.addEventListener("click",()=>{let e=l+u;c.value=e,c.dispatchEvent(new Event("input"))});w();const v=document.querySelector(".nav-seats"),p=document.querySelector(".nav-dashboard"),k=document.querySelectorAll(".dashboard-group"),F=document.querySelectorAll(".seat-group"),$=document.querySelector(".seat-sides-container"),B=document.querySelector(".seat-forth-container");v.addEventListener("click",()=>{C.forEach(e=>{e.id===`chair-slider-${o}`&&e.dispatchEvent(new Event("input"))}),k.forEach(e=>{i.to(e,{opacity:0,duration:.2,onComplete:()=>e.classList.add("visually-hidden")})}),F.forEach(e=>{i.to(e,{opacity:1,duration:.25,onComplete:()=>{e.classList.contains(`chair-${o}`)&&e.classList.remove("visually-hidden")}})}),[$,B].forEach(e=>{i.to(e,{opacity:1,duration:.25,onComplete:()=>e.classList.remove("visually-hidden")})}),v.classList.add("button-active"),p.classList.remove("button-active")});p.addEventListener("click",()=>{F.forEach(e=>{i.to(e,{opacity:0,duration:.2,onComplete:()=>e.classList.add("visually-hidden")})}),[$,B].forEach(e=>{i.to(e,{opacity:0,duration:.2,onComplete:()=>e.classList.add("visually-hidden")})}),k.forEach(e=>{i.to(e,{opacity:1,duration:.25,onComplete:()=>e.classList.remove("visually-hidden")})}),c.dispatchEvent(new Event("input")),v.classList.remove("button-active"),p.classList.add("button-active")});const y=document.querySelector(".mobile-start"),b=document.getElementById("rotate-warning");function A(){return screen.orientation&&screen.orientation.type?screen.orientation.type.startsWith("portrait"):window.orientation!==void 0?Math.abs(window.orientation)!==90:window.innerHeight>window.innerWidth}function E(){A()?b.style.display="flex":b.style.display="none"}function d(){document.querySelector(".controls-container").classList.remove("visually-hidden"),y.classList.add("visually-hidden")}function P(){document.querySelector(".controls-container").classList.add("visually-hidden"),y.classList.remove("visually-hidden")}window.addEventListener("orientationchange",E);window.addEventListener("resize",E);E();function g(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement?d():P()}y.addEventListener("click",async()=>{const e=document.documentElement;try{e.requestFullscreen?(await e.requestFullscreen(),d()):e.webkitRequestFullscreen?(await e.webkitRequestFullscreen(),d()):e.msRequestFullscreen?(await e.msRequestFullscreen(),d()):alert("Fullscreen API not supported."),m("start","y",1)}catch(t){alert("Fullscreen request failed:",t)}});document.addEventListener("fullscreenchange",g);document.addEventListener("webkitfullscreenchange",g);document.addEventListener("msfullscreenchange",g);
