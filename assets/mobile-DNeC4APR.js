import{s as A,g as n}from"./supabase-C4jjbKhz.js";const y=A.channel("room1",{config:{broadcast:{ack:!0}}});y.on("broadcast",{event:"msg"},({payload:e})=>{console.log("received:",e)});y.subscribe(e=>{console.log("channel status:",e),$(),m("connected","x",0)});function m(e,t,i){y.send({type:"broadcast",event:"command",payload:{object:e,direction:t,amount:i}})}const u=.1;function $(){for(let e=1;e<=4;e++){const t=`chair-${e}`,i=document.querySelector(`.chair-${e} span`);if(!t)continue;let s=0;const a=document.getElementById(`chair-slider-${e}`);a.addEventListener("input",l=>{s=parseFloat(l.target.value),i.textContent=Math.trunc(s*100),m(t,"x",s*.7)}),document.getElementById(`minus-${e}`).addEventListener("click",()=>{let l=s-u;a.value=l,a.dispatchEvent(new Event("input"))}),document.getElementById(`plus-${e}`).addEventListener("click",()=>{let l=s+u;a.value=l,a.dispatchEvent(new Event("input"))})}}let B=0,p=1,c=1;const I=document.querySelectorAll(".chair-slider"),q=document.querySelectorAll(".seat-btn");q.forEach(e=>{e.addEventListener("click",()=>{e.dataset.side!==void 0&&(B=Number(e.dataset.side),k(),q.forEach(t=>{t.classList.remove("side-active")}),e.classList.add("side-active")),e.dataset.forth!==void 0&&(p=Number(e.dataset.forth),k())})});function k(){c=B+p,console.log("activeseat: ",c),document.querySelectorAll(".controls-chairs").forEach(a=>{a.classList.add("visually-hidden")}),document.querySelector(`.chair-${c}`).classList.remove("visually-hidden");const i=document.querySelector(".seat-back img"),s=document.querySelector(".seat-front img");p===1?(s.src="./public/img/seat-front-on.png",i.src="./public/img/seat-back-off.png"):(s.src="./public/img/seat-front-off.png",i.src="./public/img/seat-back-on.png"),I.forEach(a=>{a.id===`chair-slider-${c}`&&a.dispatchEvent(new Event("input"))})}const o=document.getElementById("dashboard-slider");let r=0;o.addEventListener("input",e=>{const t=document.querySelector(".dashboard-group span");r=parseFloat(e.target.value),t.textContent=Math.trunc(r*100),m("dashboard","y",r*1)});const M=document.getElementById("minus-5");M.addEventListener("click",()=>{let e=r-u;o.value=e,o.dispatchEvent(new Event("input"))});const x=document.getElementById("plus-5");x.addEventListener("click",()=>{let e=r+u;o.value=e,o.dispatchEvent(new Event("input"))});$();const v=document.querySelector(".nav-seats"),f=document.querySelectorAll(".seat-group"),h=document.querySelector(".nav-dashboard"),E=document.querySelectorAll(".dashboard-group"),P=document.querySelectorAll(".nav-locked"),L=document.querySelectorAll(".feature-unavailable"),g=document.querySelector(".seat-sides-container"),b=document.querySelector(".seat-forth-container");v.addEventListener("click",()=>{I.forEach(e=>{e.id===`chair-slider-${c}`&&e.dispatchEvent(new Event("input"))}),E.forEach(e=>{n.to(e,{opacity:0,duration:.2,onComplete:()=>e.classList.add("visually-hidden")})}),L.forEach(e=>{n.to(e,{opacity:0,duration:.2,onComplete:()=>e.classList.add("visually-hidden")})}),f.forEach(e=>{n.to(e,{opacity:1,duration:.25,onComplete:()=>{e.classList.contains(`chair-${c}`)&&e.classList.remove("visually-hidden")}})}),[g,b].forEach(e=>{n.to(e,{opacity:1,duration:.25,onComplete:()=>e.classList.remove("visually-hidden")})}),v.classList.add("button-active"),h.classList.remove("button-active")});h.addEventListener("click",()=>{f.forEach(e=>{n.to(e,{opacity:0,duration:.2,onComplete:()=>e.classList.add("visually-hidden")})}),[g,b].forEach(e=>{n.to(e,{opacity:0,duration:.2,onComplete:()=>e.classList.add("visually-hidden")})}),E.forEach(e=>{n.to(e,{opacity:1,duration:.25,onComplete:()=>e.classList.remove("visually-hidden")})}),L.forEach(e=>{n.to(e,{opacity:0,duration:.2,onComplete:()=>e.classList.add("visually-hidden")})}),o.dispatchEvent(new Event("input")),v.classList.remove("button-active"),h.classList.add("button-active")});P.forEach(e=>{e.addEventListener("click",()=>{f.forEach(t=>{n.to(t,{opacity:0,duration:.2,onComplete:()=>t.classList.add("visually-hidden")})}),[g,b].forEach(t=>{n.to(t,{opacity:0,duration:.2,onComplete:()=>t.classList.add("visually-hidden")})}),E.forEach(t=>{n.to(t,{opacity:0,duration:.2,onComplete:()=>t.classList.add("visually-hidden")})}),L.forEach(t=>{n.to(t,{opacity:1,duration:.25,onComplete:()=>t.classList.remove("visually-hidden")})}),o.dispatchEvent(new Event("input")),v.classList.remove("button-active"),h.classList.remove("button-active")})});const S=document.querySelector(".mobile-start"),F=document.getElementById("rotate-warning");function V(){return screen.orientation&&screen.orientation.type?screen.orientation.type.startsWith("portrait"):window.orientation!==void 0?Math.abs(window.orientation)!==90:window.innerHeight>window.innerWidth}function w(){V()?F.style.display="flex":F.style.display="none"}function d(){document.querySelector(".controls-container").classList.remove("visually-hidden"),S.classList.add("visually-hidden")}function R(){document.querySelector(".controls-container").classList.add("visually-hidden"),S.classList.remove("visually-hidden")}window.addEventListener("orientationchange",w);window.addEventListener("resize",w);w();function C(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement?d():R()}S.addEventListener("click",async()=>{const e=document.documentElement;try{e.requestFullscreen?(await e.requestFullscreen(),d()):e.webkitRequestFullscreen?(await e.webkitRequestFullscreen(),d()):e.msRequestFullscreen?(await e.msRequestFullscreen(),d()):alert("Fullscreen API not supported."),m("start","y",1)}catch(t){alert("Fullscreen request failed:",t)}});document.addEventListener("fullscreenchange",C);document.addEventListener("webkitfullscreenchange",C);document.addEventListener("msfullscreenchange",C);
